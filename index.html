<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ACM Gene Plot Viewer</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 40px;
    max-width: 900px;
}
input {
    width: 300px;
    padding: 8px;
    font-size: 16px;
}
#results {
    margin-top: 20px;
}
.plot-item {
    margin-bottom: 40px;
}
iframe {
    width: 100%;
    height: 600px;   /* PDF preview is large and readable */
    border: 1px solid #ccc;
}
</style>
</head>
<body>

<h1>ACM Gene PDF Viewer</h1>
<p>Search a gene name to view and download its PDF plots.</p>

<input id="searchBox" placeholder="Enter gene name..." />

<div id="results"></div>

<script>
// Step 1: Load the JSON file containing all PDF file names
let pdfList = [];
fetch("plot_list.json")
  .then(response => response.json())
  .then(data => pdfList = data);

// Step 2: When user types, filter and show results
document.getElementById("searchBox").addEventListener("input", function () {
    const query = this.value.trim().toLowerCase();
    const resultsDiv = document.getElementById("results");
    resultsDiv.innerHTML = "";

    if (!query) return;

    // Filter PDFs containing the gene name
    const matches = pdfList.filter(name => name.toLowerCase().includes(query));

    if (matches.length === 0) {
        resultsDiv.innerHTML = "<p>No matching plots found.</p>";
        return;
    }

    // Display matching PDFs
    matches.forEach(filename => {
        const div = document.createElement("div");
        div.className = "plot-item";

        div.innerHTML = `
            <h3>${filename}</h3>
            <iframe src="plots/${filename}"></iframe>
            <p><a href="plots/${filename}" download>Download PDF</a></p>
        `;
        resultsDiv.appendChild(div);
    });
});
</script>

</body>
</html>
